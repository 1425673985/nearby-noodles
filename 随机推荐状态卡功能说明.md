# 随机推荐状态卡功能说明

## 功能概述

在原有状态标签（如"就近解决"）旁边，新增了一个随机推荐状态卡，用于轻量化推荐，提升用户点击意愿。

## 实现内容

### 1. 双标签显示

每个面店同时显示两个状态卡：
- **原有状态卡**（蓝色系）：基于距离的客观标签
  - 就近解决（距离 < 150米）
  - 附近常吃（距离 150-300米）
  - 随便不踩雷（距离 ≥ 300米）

- **随机推荐状态卡**（橙色系）：情绪引导标签
  - 值得一试
  - 顺路看看
  - 或许好吃

### 2. 随机规则

- 每个面店独立随机
- 每次列表刷新或页面重新渲染时重新随机
- 切换面店时也会重新随机
- 不需要本地存储或后端记录

### 3. 样式设计

**原有状态卡（蓝色系）**：
- 背景色：`#f0f9ff`（浅蓝色）
- 边框：`#bae6fd`（蓝色）
- 文字：`#0369a1`（深蓝色）
- 字号：24rpx

**随机推荐状态卡（橙色系）**：
- 背景色：`#fff7ed`（浅橙色）
- 边框：`#fed7aa`（橙色）
- 文字：`#ea580c`（深橙色）
- 字号：22rpx（略小于原标签）

**布局**：
- 两个标签并排显示
- 使用 `flex-wrap` 支持换行
- 标签间距：12rpx

### 4. 代码实现

#### 数据结构

在 `processRestaurantData()` 方法中，为每个面店添加 `randomTag` 字段：

```javascript
{
  id: '...',
  name: '...',
  tag: '就近解决',        // 原有标签
  randomTag: '值得一试',  // 随机推荐标签
  // ... 其他字段
}
```

#### 核心方法

```javascript
// 随机推荐标签池
RANDOM_TAG_POOL: [
  '值得一试',
  '顺路看看',
  '或许好吃'
],

// 生成随机推荐标签
getRandomRecommendTag() {
  const pool = this.RANDOM_TAG_POOL
  const randomIndex = Math.floor(Math.random() * pool.length)
  return pool[randomIndex]
}
```

#### 使用位置

1. **首次加载面店时**：
   ```javascript
   firstRestaurant.tag = this.getRecommendTag(firstRestaurant.distance)
   firstRestaurant.randomTag = this.getRandomRecommendTag()
   ```

2. **处理面店数据时**：
   ```javascript
   const tag = this.getRecommendTag(Math.round(distance))
   const randomTag = this.getRandomRecommendTag()
   return { ..., tag, randomTag }
   ```

3. **切换面店时**：
   ```javascript
   nextRestaurant.tag = this.getRecommendTag(nextRestaurant.distance)
   nextRestaurant.randomTag = this.getRandomRecommendTag() // 重新随机
   ```

## UI展示

```
[就近解决] [值得一试]  ← 两个标签并排显示
```

## 设计目标

- ✅ **提升点击意愿**：通过情绪引导标签增加用户兴趣
- ✅ **轻量化设计**：不抢主视觉，保持整体风格
- ✅ **明显区分**：使用不同颜色系区分两种标签
- ✅ **随机性**：每次刷新重新随机，保持新鲜感

## 注意事项

1. **随机性**：每次页面刷新、切换面店都会重新随机，不保证一致性
2. **非真实评价**：随机标签仅用于情绪引导，不代表真实评价
3. **样式一致性**：两个版本（原版和v2）已同步实现

## 修改的文件

### 原版本（微信小程序）
- `pages/index/index.js` - 添加随机标签生成逻辑
- `pages/index/index.wxml` - 修改UI结构，显示两个标签
- `pages/index/index.wxss` - 添加新标签样式

### v2版本（uni-app）
- `pages/index/index.vue` - 同步实现所有功能

## 测试建议

1. 刷新页面，观察随机标签是否变化
2. 切换面店，观察随机标签是否重新生成
3. 检查两个标签的样式是否明显区分
4. 验证在不同距离下面店，原有标签是否正确显示

