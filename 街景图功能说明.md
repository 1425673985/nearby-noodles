# 腾讯地图街景静态图功能说明

## 功能概述

使用腾讯地图的街景静态图API，显示面馆位置的街景照片，帮助用户更直观地了解店铺位置和周边环境。

## API说明

- **API地址**：`https://apis.map.qq.com/ws/streetview/v1/image`
- **文档**：https://lbs.qq.com/service/webService/webServiceGuide/webServiceStreetview

## 参数说明

- `location`: 坐标（纬度,经度）
- `size`: 图片尺寸（宽*高，单位像素），当前设置为 750*500
- `heading`: 水平视角（0-360度），0为正北方向，当前设置为0
- `pitch`: 垂直视角（-90到90度），0为水平，当前设置为0
- `key`: 腾讯地图API Key

## 配置要求

### 1. 域名配置（重要）

需要在微信公众平台配置 downloadFile 合法域名：
- 登录 [微信公众平台](https://mp.weixin.qq.com/)
- 进入：开发 -> 开发管理 -> 开发设置 -> 服务器域名
- 在"downloadFile合法域名"中添加：`https://apis.map.qq.com`

### 2. API Key配置

- API Key已配置在 `utils/config.js` 中
- 确保API Key已开启相关服务权限

## 功能特点

1. **自动生成街景图**：根据面馆的经纬度坐标自动生成街景图URL
2. **显示店铺周边环境**：可以看到店铺招牌和周边环境，方便用户找路
3. **等比例填充显示**：使用 `mode="aspectFill"` 模式，图片等比例填充容器
4. **加载失败处理**：如果街景图加载失败，会显示"加载中..."占位符

## 注意事项

1. **街景覆盖范围**：腾讯地图的街景覆盖范围有限，某些地区可能没有街景数据
2. **加载时间**：街景图可能需要一些时间加载，建议保持网络连接
3. **API调用限制**：注意腾讯地图API的调用频率限制
4. **坐标精度**：确保传入的经纬度坐标准确，以获得最佳街景效果

## 后续优化建议

1. 可以调整 `heading` 和 `pitch` 参数，优化视角角度
2. 如果某个位置没有街景数据，可以降级显示静态地图
3. 可以添加加载状态提示，提升用户体验
