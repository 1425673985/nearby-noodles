# 附近面馆小程序 - 项目说明

## 项目概述

这是一个微信小程序项目，帮助用户查找附近3km内的面馆，并提供导航功能。

## 技术栈

- 微信小程序框架
- 微信地图API（用于POI搜索）
- JavaScript ES6+

## 核心功能

1. **定位授权** - 获取用户位置信息
2. **用户登录** - 微信用户信息授权
3. **附近搜索** - 基于微信地图API搜索附近3km内的面馆
4. **信息展示** - 显示面馆详细信息（名称、地址、评分、图片、评价）
5. **切换面馆** - 在搜索结果中切换显示不同的面馆
6. **导航功能** - 调用微信内置地图进行导航

## 文件说明

### 根目录文件

- `app.js` - 小程序主逻辑，处理全局生命周期
- `app.json` - 小程序全局配置（页面路由、窗口样式、权限配置等）
- `app.wxss` - 小程序全局样式
- `project.config.json` - 微信开发者工具项目配置
- `sitemap.json` - 小程序索引配置
- `README.md` - 项目说明文档
- `QUICKSTART.md` - 快速开始指南
- `server-example.js` - 服务器代理示例代码（可选）

### pages/index/ - 主页面

- `index.js` - 页面逻辑
  - 定位授权处理
  - 用户位置获取
  - 面馆搜索和数据处理
  - 面馆切换逻辑
  - 导航功能
- `index.wxml` - 页面结构
  - 授权提示界面
  - 加载状态界面
  - 面馆信息卡片
  - 操作按钮
- `index.wxss` - 页面样式
  - 响应式布局
  - 卡片式设计
  - 现代化的UI风格
- `index.json` - 页面配置

### utils/ - 工具函数

- `api.js` - API调用函数
  - `searchNearbyRestaurants` - 直接调用高德API搜索面馆
  - `searchNearbyRestaurantsByProxy` - 通过服务器代理搜索面馆
- `config.js` - 配置文件
  - 高德地图API Key
  - 搜索参数配置
  - 服务器地址配置

## 数据流程

1. 用户打开小程序
2. 检查定位授权状态
3. 如果未授权，请求用户授权
4. 获取用户位置（经纬度）
5. 调用高德地图API搜索附近3km内的面馆
6. 处理返回的数据（计算距离、格式化信息等）
7. 显示第一个面馆的详细信息
8. 用户可以通过"换一家"按钮切换面馆
9. 用户可以通过"开始导航"按钮打开导航

## API接口说明

### 高德地图周边搜索API

- **接口地址**: `https://restapi.amap.com/v3/place/around`
- **请求方式**: GET
- **参数**:
  - `key`: 高德地图API Key
  - `location`: 经纬度（格式：经度,纬度）
  - `keywords`: 搜索关键词（面馆）
  - `radius`: 搜索半径（米）
  - `types`: POI类型（050000表示餐饮服务）
  - `extensions`: 返回详细信息（all）

## 注意事项

1. **API Key安全**: 高德地图API Key应该妥善保管，建议使用服务器代理方案
2. **权限配置**: 确保在`app.json`中正确配置了位置权限说明
3. **域名配置**: 如果直接调用高德API，需要在微信公众平台配置request合法域名
4. **坐标系**: 使用GCJ02坐标系（高德地图标准）
5. **图片资源**: 需要准备默认图片或处理图片加载失败的情况

## 开发建议

1. 使用服务器代理调用高德API，避免暴露API Key
2. 添加错误处理和重试机制
3. 添加加载状态和错误提示
4. 优化搜索算法，提高匹配准确度
5. 添加面馆详情页面
6. 集成真实的用户评价系统
7. 添加收藏和分享功能
8. 优化UI/UX设计

## 许可证

MIT License
